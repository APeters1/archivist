<div class="row">
    <div data-ng-include="'partials/build/sidebar.html'" class="col-sm-4 col-md-3 sidebar" data-resume-scroll="sidebar"></div>

    <div data-ng-if="current" class="col-sm-8 col-md-9 col-sm-offset-4 col-md-offset-3 main">
        <h1 class="page-header">
            Code List
        </h1>
        <div class="edit-cancel-save">
            <button
                    type="button"
                    class="btn btn-primary"
                    data-ng-show="!editMode"
                    data-ng-click="startEditMode()"
            >
                Edit
            </button>
            <button
                    type="button"
                    class="btn btn-default"
                    data-ng-show="editMode"
                    data-ng-click="cancel()"
            >
                Cancel
            </button>
            <button
                    type="button"
                    class="btn btn-primary"
                    data-ng-show="editMode"
                    data-ng-click="save()"
            >
                Save
            </button>
        </div>
        <form>
            <div class="form-group">
                <label for="a-codelist-label">
                    Label
                </label>
                <input
                        type="text"
                        class="form-control"
                        id="a-codelist-label"
                        placeholder="Label"
                        data-ng-model="current.label"
                        data-ng-disabled="!editMode"
                />
            </div>

            <div class="checkbox">
                <label>
                    <input
                            type="checkbox"
                            id="a-codelist-rd"
                            data-ng-model="current.rd"
                            data-ng-disabled="!editMode"
                    />
                    Response Domain
                </label>
            </div>

            <table class="table table-striped table-condensed">
                <tr>
                    <th>ID</th>
                    <th>Value</th>
                    <th>Category</th>
                    <th></th>
                </tr>
                <tr data-ng-repeat="code in current.codes | orderBy:'order'">
                    <td>
                        {{code.id}}
                    </td>
                    <td>
                        <input
                                type="text"
                                class="form-control"
                                placeholder="Value"
                                data-ng-model="code.value"
                                data-ng-disabled="!editMode"
                        />
                    </td>
                    <td>
                        <input
                                type="text"
                                class="form-control"
                                placeholder="Category"
                                data-ng-model="code.label"
                                data-ng-disabled="!editMode"
                                data-uib-typeahead="category.label for category in categories | filter:$viewValue | orderBy:'label'"
                                data-typeahead-show-hint="true"
                                data-typeahead-min-length="2"
                                autocomplete="off"
                        />
                    </td>
                    <td>
                        <button
                                class="btn btn-link"
                                data-ng-click="removeCode(code)"
                                data-ng-show="editMode"
                        >
                            Remove
                        </button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <input
                            type="text"
                            class="form-control"
                            placeholder="Value"
                            data-ng-model="current.newValue"
                            data-ng-disabled="!editMode"
                    />
                    </td>
                    <td>
                        <input
                            type="text"
                            class="form-control"
                            placeholder="Category"
                            data-ng-model="newCategory"
                            data-ng-disabled="!editMode"
                        />
                    </td>
                </tr>
            </table>
        </form>

        <h3 class="sub-header">
            Used by
        </h3>

        <table class="table table-striped table-condensed">
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Type
                </th>
                <th>
                    Label
                </th>
            </tr>
            <tr data-ng-repeat="obj in current.used_by">
                <td>
                    {{obj.id}}
                </td>
                <td>
                    {{obj.type}}
                </td>
                <td>
                    {{obj.label}}
                </td>
            </tr>
        </table>
    </div>
</div>